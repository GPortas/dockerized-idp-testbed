<VirtualHost *:80>
    ServerName https://localhost:443
    UseCanonicalName On

    ProxyPassMatch ^/Shibboleth.sso !
    ProxyPassMatch ^/shibboleth-ds !

    <Location /shib.xhtml>
        AuthType shibboleth
        ShibRequestSetting requireSession 1
        require valid-user
    </Location>
</VirtualHost>
