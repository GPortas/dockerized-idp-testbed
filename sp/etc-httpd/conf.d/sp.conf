<VirtualHost *:80>
    ServerName https://localhost:443
    UseCanonicalName On

    ProxyPassMatch ^/Shibboleth.sso !
    ProxyPassMatch ^/shibboleth-ds !
    # pass everything else to Payara
    ProxyPass / ajp://host.docker.internal:8009/

    <Location /shib.xhtml>
        AuthType shibboleth
        ShibRequestSetting requireSession 1
        require valid-user
    </Location>
</VirtualHost>
